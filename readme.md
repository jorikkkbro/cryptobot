# üéÅ Gift Auction System

> –ü—Ä–∏–≤–µ—Ç, —Ç—É—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–∞–∫ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ—á–µ–º—É –±—ã–ª —Å–¥–µ–ª–∞–Ω –≤—ã–±–æ—Ä –∏–º–µ–Ω–Ω–æ –≤ —Å—Ç–æ—Ä–æ–Ω—É —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º
git clone https://github.com/jorikkkbro/cryptobot.git
cd gift-auction

# –ó–∞–ø—É—Å–∫–∞–µ–º
docker-compose up -d

# –û—Ç–∫—Ä—ã–≤–∞–µ–º
open http://localhost:3000
```

### –ë–µ–∑ Docker

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º
git clone https://github.com/jorikkkbro/cryptobot.git
cd gift-auction

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å–∫–∞–µ–º MongoDB (–Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ)
# mongod --dbpath /path/to/data

# –ó–∞–ø—É—Å–∫–∞–µ–º
npm run dev
# –∏–ª–∏
npx ts-node src/index.ts
```

---

## 1. üéØ –ê—É–∫—Ü–∏–æ–Ω—ã

–°–∞–º–∏ –ø–æ —Å–µ–±–µ –∞–∫—Ü–∏–æ–Ω—ã —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–±–æ—Ä—ã –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞—É–Ω–¥–æ–≤, –ø–µ—Ä–≤—ã–µ N –º–µ—Å—Ç –ø–æ–ª—É—á–∞—é—Ç —Å–≤–æ–π –ø–æ–¥–∞—Ä–æ–∫ —Å–æ —Å–≤–æ–∏–º –Ω–æ–º–µ—Ä–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞ 15 –º–µ—Å—Ç–æ –≤—ã–¥–∞–µ—Ç—Å—è –ø–æ–¥–∞—Ä–æ–∫ ‚Ññ15) –∏ "–≤—ã—Ä–µ–∑–∞—é—Ç—Å—è" –∏–∑ —Å–ø–∏—Å–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞—è –ø–µ—Ä–≤—ã–µ –º–µ—Å—Ç–∞, –∏—Ö –º–µ—Å—Ç–∞ –∑–∞–±–∏—Ä–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∏–¥—É—â–∏–µ –ø–æ –∫–æ–ª-–≤–æ —Å—Ç–∞–≤–∫–∏

### 1.1 –ö–∞–∫ –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –∫–æ–¥–µ

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∞—É–∫—Ü–∏–æ–Ω–∞, –¥–µ–ª–∞–µ—Ç—Å—è —Å–Ω–∞–ø—à–æ—Ç –±–∞–ª–∞–Ω—Å–æ–≤, –¥–ª—è —á–µ–≥–æ? –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å—Ç–∞–≤–∫–∏ –∏ "–æ—Ç–∫–∞—Ç–∞" –±–∞–ª–∞–Ω—Å–æ–≤ –≤ —Å–ª—É—á–∞–µ –∫—Ä–∞—à–∞ —Å–µ—Ä–≤–µ—Ä–∞.

> üí° "–ú–æ–∂–Ω–æ –∂–µ –±—ã–ª–æ –¥–µ–ª–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—è —Å—Ä–∞–∑—É –≤ –ë–î!" - –¥–∞ –º–æ–∂–Ω–æ, –Ω–æ –æ–ø—è—Ç—å —Ç–∞–∫–∏, —Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –±—É–¥—É—Ç –¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–æ–∫, —Ö–æ—Ç—å –º–∏–ª–∏–æ–Ω—ã, –≤—Å–µ –±—É–¥—É –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ –∏ –∞—Ç–æ–º–∞—Ä–Ω–æ –ø—Ä—è–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∞ –Ω–µ —á–µ—Ä–µ–∑ –ë–î, –≤ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ –∞–ø–∏, –¥–æ–ø—É—Å—Ç–∏–º /api/balance - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º –∏–∑ –∫—ç—à–∞

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –†–ê–£–ù–î–ê –≤ –ë–î –¥–µ–ª–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å —Ç–∞–∫–æ–≥–æ –≤–∏–¥–∞:

```typescript
export interface Auction {
  _id: string
  name: string
  gift: Gift
  plan: RoundPlan[]
  winners: Winner[]
  status: 'pending' | 'active' | 'finished'
  created_at: Date
  finished_at?: Date
}
```

**plan** - –ø–ª–∞–Ω —Ä–∞—É–Ω–¥–æ–≤, –≤–∏–¥–∞:

```javascript
plan: [                             // –ü–ª–∞–Ω —Ä–∞—É–Ω–¥–æ–≤
  {
    round_number: 1,                // –ù–æ–º–µ—Ä —Ä–∞—É–Ω–¥–∞
    count_of_gifts: 5,              // –ü–æ–¥–∞—Ä–∫–æ–≤ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ
    time: 60                        // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫—É–Ω–¥—ã)
  },
  {
    round_number: 2,
    count_of_gifts: 5,
    time: 60
  },
  {
    round_number: 3,
    count_of_gifts: 5,
    time: 60
  }
]
```

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–∞—É–Ω–¥–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è **winners** –∏ —É –Ω–∏—Ö –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –±–∞–ª–∞–Ω—Å—ã (—Ç–æ–ª—å–∫–æ —É –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö winners –ø—Ä—è–º–æ –≤ –ë–î):

```javascript
winners: [                          // –ü–æ–±–µ–¥–∏—Ç–µ–ª–∏ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ —Ö–æ–¥—É)
  {
    user_id: "bot_123",             // ID –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
    stars: 8500,                    // –ï–≥–æ —Å—Ç–∞–≤–∫–∞
    gift_number: 1                  // –ù–æ–º–µ—Ä –ø–æ–¥–∞—Ä–∫–∞ (1, 2, 3...)
  },
  {
    user_id: "bot_456",
    stars: 8200,
    gift_number: 2
  }
]
```

–¢–∞–∫ –æ–Ω–∏ –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç, –º–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –∏ —Å–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç —Ä–∞–∑—ã–≥—Ä–≤–∞—Ç—å—Å—è –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Ä–∞—É–Ω–¥–µ (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ –Ω–æ –Ω–∞ —Å–∞–π—Ç–µ –Ω–µ—Ç—É –≤–ø–∞–¥–ª—É –±—ã–ª–æ)

–í —Ñ–∏–Ω–∞–ª–µ –±–∞–ª–∞–Ω—Å—ã —Å–∏–Ω—Ö—Ä–∞–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ –ë–î (–ø–∞—Ç—á–∞—Ç –ë–î) –∏ —Ä–∞–∑–¥–∞—é—Ç—Å—è –ø–æ–¥–∞—Ä–∫–∏

> üéÆ –ù–∞ —Å–∞–π—Ç–µ –º–æ–∂–µ—Ç–µ –ø–æ—Ç—ã–∫–∞—Ç—å –≤–∫–ª—é—á–∏—Ç—å –±–æ—Ç–æ–≤, –∏ –≤—Å–µ —Ç–∞–∫–æ–µ

---

## 2. üë§ User

–¢—É—Ç –≤—Å–µ —É–ø—Ä–∞–∑–¥–µ–Ω–æ —Ç—É–ø–æ –±–∞–ª–∞–Ω—Å—ã –∏ –≤—Å–µ

---

## 3. üì° –†–∞–∑–¥–∞—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚Üí –∫–ª–∏–µ–Ω—Ç

**SSE** –Ω–µ –º—É—á–∞–µ–º—Å—è —Å —Å–æ–∫–µ—Ç–∞–º–∏ –∏ –≤—Å–µ–π –º–∏—à—É—Ä–æ–π

---

## 4. üèÅ –§–∏–Ω–∞–ª—å—á–∏–∫

–ù–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ–º –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∫–æ—Ç–æ—Ä—ã–π —Å–ø–æ—Å–æ–±–µ–Ω —Ö–æ—Ä–æ—à–æ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å **30–∫ bid/—Å–µ–∫** - –∏ —ç—Ç–æ –Ω–∞ –º–æ–µ–º –∫–æ–º–ø–µ!

---

## 5. üìä –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç—É—Ç –Ω–∞–¥–æ –¥—É–º–∞—Ç—å –ø–æ–¥ –∫–æ–≥–æ –º—ã –¥–µ–ª–∞–µ–º –∏ –∑–∞ —á—Ç–æ –º—ã –±–µ—Ä–µ–º –∫–æ–º–º–∏—Å—Å–∏—é, fee –±–µ—Ä–µ–º –æ—Ç –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–∏, —Ç–æ–≥–¥–∞ –Ω–∞–¥–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω—É –≥–µ–π–º–±–ª–∞ –∏ –∫—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π - —Ç–æ—Ç –ø–æ–ª—É—á–∏–ª –ø–æ–¥–∞—Ä–æ–∫

–¢–æ –µ—Å—Ç—å –µ—Å–ª–∏ –æ–±–∞ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –ø–æ 500 –∑–≤–µ–∑–¥ –ø–æ–ª—É—á–∏—Ç —Ç–æ—Ç –∫—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π, **–ù–û** –≤ –∫–æ–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥—Ä—É–≥–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞, –±–æ–ª–µ–µ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è:

> ‚úÖ –ö—Ç–æ **–ü–ï–†–í–´–ô** –ø–æ—Å—Ç–∞–≤–∏–ª —Ç–æ—Ç –∏ –≤—ã—à–µ –±—É–¥–µ—Ç

---

## 6. üõ°Ô∏è –ê–Ω—Ç–∏-—Å–Ω–∞–π–ø–∏–Ω–≥

–¢—É—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ö–∑ –∫–∞–∫ –ª—É—á—à–µ –±—ã–ª–æ –±—ã —Å–¥–µ–ª–∞—Ç—å —É –º–µ–Ω—è –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

~~–ö—Ç–æ —Å—Ç–∞–≤–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π - –ø–æ–ª—É—á–∞–µ—Ç —à—Ç—Ä–∞—Ñ –∏ –≤–º–µ—Å—Ç–æ 200 –∑–≤–µ–∑–¥ –ø—Ä–∏–¥–µ—Ç —Ç–æ–ª—å–∫–æ 150 —É—Å–ª–æ–≤–Ω–æ~~ ‚Äî —á—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º —á–µ—Å—Ç–Ω–æ, –ø–æ —ç—Ç–æ–º—É —è –≤—ã–±—Ä–∞–ª –∏–Ω–æ–π –ø–æ–¥—Ö–æ–¥:

> ‚ö° –°—Ç–∞–≤–∫–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ **5 —Å–µ–∫—É–Ω–¥** –Ω–µ –Ω–∞ –¥–æ–ª–≥–æ –ø—Ä–æ–¥–ª–µ–≤–∞—é—Ç —Ä–∞—É–Ω–¥ (–Ω–∞ **10 —Å–µ–∫—É–Ω–¥** - –¥–ª—è –Ω–∞—Å —ç—Ç–æ + –ª–µ—Ç—è—Ç –∫—É—á–∞ —Å—Ç–∞–≤–æ–∫) **–ù–û –¢–û–õ–¨–ö–û –ï–°–õ–ò –°–ú–ï–°–¢–ò–õ–°–Ø –ö–¢–û –¢–û –ò–ó –ü–†–ò–ó–û–í–´–• –ú–ï–°–¢!!!**

## 7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±–∞–±–æ–∫

–≤—Å–µ –¥–µ–Ω—å–≥–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –º—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–¥–∞—Ä–∫–∏, –ü–û–ö–ê –ù–ï –£–ë–ï–î–ò–ú–°–Ø –ß–¢–û –î–ï–ù–¨–ì–ò –ü–û–õ–£–ß–ï–ù–´ –ò –°–ü–ò–°–ê–ù–´ –£ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

## 8. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—á –±—ã—Å—Ç—Ä–æ, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ O(n)!!!

–í–∏–¥–æ—Å —Å —Å–∞–π—Ç–µ—Ü–∫–∏–º: https://www.youtube.com/watch?v=XBvX4TnmOdA

–ù–æ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ —Å–∞–º–∏, —Å–∫–∞—á–∞–≤ –≥–∏—Ç